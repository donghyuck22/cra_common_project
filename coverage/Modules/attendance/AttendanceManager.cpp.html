<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
        <meta charset="utf-8"/>
	    <title>AttendanceManager.cpp</title>
	    <link href="../../third-party/google-code-prettify/prettify-CppCoverage.css" type="text/css" rel="stylesheet" />
	    <script type="text/javascript" src="../../third-party/google-code-prettify/prettify.js"></script>
	</head>
    <body onload="prettyPrint()">
        <h4></h4>
        <pre class="prettyprint lang-cpp linenums">
#include "AttendanceManager.h"
#include &lt;fstream&gt;
#include &lt;algorithm&gt;

AttendanceManager::AttendanceManager(const std::shared_ptr&lt;IGradePolicy&gt;&amp; gradePolicy)
<span style = "background-color:#dfd">    : gradePolicy_(gradePolicy) {
}</span>

<span style = "background-color:#dfd">void AttendanceManager::processAttendanceFile(const std::string&amp; filename) {
    std::ifstream fin(filename);
    std::string name, dayOfWeek;
    while (fin &gt;&gt; name &gt;&gt; dayOfWeek) {
        Player* player = findPlayerByName(name);</span>

<span style = "background-color:#dfd">        if (player == nullptr) {
            players_.emplace_back(name);
            player = &amp;players_.back();</span>
        }

<span style = "background-color:#dfd">        player-&gt;recordAttendance(dayOfWeek);
    }
}</span>

<span style = "background-color:#dfd">Player* AttendanceManager::findPlayerByName(const std::string&amp; name) {
    for (Player&amp; player : players_) {
        if (player.getName() == name) {
            return &amp;player;</span>
        }
<span style = "background-color:#dfd">    }
    return nullptr;
}</span>

<span style = "background-color:#dfd">void AttendanceManager::calculateResults() {
    for (Player&amp; player : players_) {
        if (player.getWednesdayCount() &gt;= 10) {
            player.addPoints(10);</span>
        }
<span style = "background-color:#dfd">        if (player.getWeekendCount() &gt;= 10) {
            player.addPoints(10);</span>
        }

<span style = "background-color:#dfd">        gradePolicy_-&gt;apply(player);
    }
}</span>

<span style = "background-color:#dfd">std::vector&lt;Player&gt; AttendanceManager::getPlayers() const {
    return players_;
}</span>

<span style = "background-color:#dfd">std::vector&lt;Player&gt; AttendanceManager::getRemovalCandidates() const {
    std::vector&lt;Player&gt; candidates;
    for (const Player&amp; player : players_) {
        if (player.isRemovalCandidate()) {
            candidates.push_back(player);</span>
        }
<span style = "background-color:#dfd">    }
    return candidates;
}</span></pre>
        <hr />
        <table width="100%">
            <thead>
                <tr>
                    <th align="center">
                        <small>Generated by</small>
                        <a href="https://github.com/OpenCppCoverage/OpenCppCoverage/releases">
                            <strong>OpenCppCoverage (Version: 0.9.9.0)</strong>
                        </a>
                    </th>
                </tr>
            </thead>
        </table>
    </body>
</html>